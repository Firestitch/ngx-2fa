<fs-dialog>
  <h1 mat-dialog-title>
    Verification methods
  </h1>
  <form
    fsForm
    [submit]="setVerificationMethod"
    [dirtySubmitButton]="false">
    <mat-dialog-content>
      <ng-container>
        <fs-radio-group
          [(ngModel)]="verificationMethod"
          name="method"
          [compareWith]="compareWith">
          @for (methodMap of verificationMethods | keyvalue; track methodMap) {
            <div class="method">
              @switch (methodMap.key) {
                @case (verificationMethodType.Sms) {
                  <div class="method-header">
                    <div class="method-icon">
                      <mat-icon>
                        textsms
                      </mat-icon>
                    </div>
                    <div class="method-name">
                      <div class="method-title">
                        Text message
                      </div>
                      <div class="method-subtitle">
                        Send verification code to a mobile number
                      </div>
                    </div>
                  </div>
                }
                @case (verificationMethodType.Email) {
                  <div class="method-header">
                    <div class="method-icon">
                      <mat-icon>
                        mail
                      </mat-icon>
                    </div>
                    <div class="method-name">
                      <div class="method-title">
                        Email
                      </div>
                      <div class="method-subtitle">
                        Send verification code to an email address
                      </div>
                    </div>
                  </div>
                }
                @case (verificationMethodType.App) {
                  <div class="method-header">
                    <div class="method-icon">
                      <mat-icon>
                        phone_iphone
                      </mat-icon>
                    </div>
                    <div class="method-name">
                      <div class="method-title">
                        Authenticator app
                      </div>
                      <div class="method-subtitle">
                        Send verification code to your authenticator app
                      </div>
                    </div>
                  </div>
                }
              }
              @for (method of methodMap.value; track method) {
                <mat-radio-button
                  class="method-item"
                  [value]="method">
                  @switch (methodMap.key) {
                    @case (verificationMethodType.Sms) {
                      {{ method.phoneNumber }}
                    }
                    @case (verificationMethodType.Email) {
                      {{ method.email }}
                    }
                    @case (verificationMethodType.App) {
                      Authenticator App
                    }
                  }
                </mat-radio-button>
              }
            </div>
          }
        </fs-radio-group>
      </ng-container>
    </mat-dialog-content>
    <mat-dialog-actions>
      <div class="actions">
        <button
          mat-button
          type="submit"
          color="primary">
          Next
        </button>
        <button
          mat-button
          type="button"
          [mat-dialog-close]="null">
          Cancel
        </button>
      </div>
    </mat-dialog-actions>
  </form>
</fs-dialog>